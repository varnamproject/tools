window.CodeMirror=function(){"use strict";function a(g,j){function k(a){bd.onDragEvent&&bd.onDragEvent(ee,A(a))||D(a)}function p(a){return a>=0&&a<zd.size}function q(a){return u(zd,a)}function z(a,b){Kd=!0;for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function C(a,b){return a.styles||a.highlight(vd,a.stateAfter=Wc(v(a)),bd.tabSize),a.getContent(bd.tabSize,b,bd.lineWrapping)}function J(a){var b={line:0,ch:0};Fb(b,{line:zd.size-1,ch:q(zd.size-1).text.length},xb(a),b,b),Fd=!0}function V(a){var b=[];return zd.iter(0,zd.size,function(a){b.push(a.text)}),b.join(a||"\n")}function _(){Math.abs(hd.scrollTop-Od)>1&&(Od=sd.scrollTop=hd.scrollTop,ac([]))}function ab(){bd.fixedGutter&&pd.style.left!=sd.scrollLeft+"px"&&(pd.style.left=sd.scrollLeft+"px"),Math.abs(sd.scrollTop-Od)>1&&(Od=sd.scrollTop,hd.scrollTop!=Od&&(hd.scrollTop=Od),ac([])),bd.onScroll&&bd.onScroll(ee)}function db(a){function b(b){lb&&(sd.draggable=!1),Ed=!1,m(),n(),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(B(b),jc(g.line,g.ch,!0),Wb())}function c(a){if("single"==i)gc(g,a);else if("double"==i){var b=qc(a);Q(a,o)?gc(b.from,p):gc(o,b.to)}else"triple"==i&&(Q(a,o)?gc(p,lc({line:a.line,ch:0})):gc(o,lc({line:a.line+1,ch:0})))}function d(a){var b=Rc(a,!0);if(b&&!P(b,l)){wd||Db(),l=b,c(b),Fd=!1;var e=_b();(b.line>=e.to||b.line<e.from)&&(k=setTimeout(_c(function(){d(a)}),150))}}function e(a){clearTimeout(k);var b=Rc(a);b&&c(b),B(a),Wb(),Fd=!0,q(),m()}fc(G(a,"shiftKey"));for(var f=E(a);f!=td;f=f.parentNode)if(f.parentNode==rd&&f!=qd)return;for(var f=E(a);f!=td;f=f.parentNode)if(f.parentNode==od)return bd.onGutterClick&&bd.onGutterClick(ee,X(od.childNodes,f)+Td,a),B(a);var g=Rc(a);switch(F(a)){case 3:return gb&&Sc(a),void 0;case 2:return g&&jc(g.line,g.ch,!0),setTimeout(Wb,20),B(a),void 0}if(!g)return E(a)==sd&&B(a),void 0;wd||Db();var h=+new Date,i="single";if(Dd&&Dd.time>h-400&&P(Dd.pos,g))i="triple",B(a),setTimeout(Wb,20),rc(g.line);else if(Cd&&Cd.time>h-400&&P(Cd.pos,g)){i="double",Dd={time:h,pos:g},B(a);var j=qc(g);gc(j.from,j.to)}else Cd={time:h,pos:g};var k,l=g;if(bd.dragDrop&&tb&&!bd.readOnly&&!P(Nd.from,Nd.to)&&!Q(g,Nd.from)&&!Q(Nd.to,g)&&"single"==i){lb&&(sd.draggable=!0);var m=H(document,"mouseup",_c(b),!0),n=H(sd,"drop",_c(b),!0);return Ed=!0,sd.dragDrop&&sd.dragDrop(),void 0}B(a),"single"==i&&jc(g.line,g.ch,!0);var o=Nd.from,p=Nd.to,q=H(document,"mousemove",_c(function(a){clearTimeout(k),B(a),hb||F(a)?d(a):e(a)}),!0),m=H(document,"mouseup",_c(e),!0)}function mb(a){for(var b=E(a);b!=td;b=b.parentNode)if(b.parentNode==od)return B(a);B(a)}function ob(a){if(!bd.onDragEvent||!bd.onDragEvent(ee,A(a))){B(a);var b=Rc(a,!0),c=a.dataTransfer.files;if(b&&!bd.readOnly)if(c&&c.length&&window.FileReader&&window.File)for(var d=c.length,e=Array(d),f=0,g=function(a,c){var g=new FileReader;g.onload=function(){e[c]=g.result,++f==d&&(b=lc(b),_c(function(){var a=Nb(e.join(""),b,b);gc(b,a)})())},g.readAsText(a)},h=0;d>h;++h)g(c[h],h);else{if(Ed&&!Q(b,Nd.from)&&!Q(Nd.to,b))return;try{var e=a.dataTransfer.getData("Text");e&&ad(function(){var a=Nd.from,c=Nd.to;gc(b,b),Ed&&Nb("",a,c),Ob(e),Wb()})}catch(a){}}}}function rb(a){var b=Rb();a.dataTransfer.setData("Text",b),a.dataTransfer.setDragImage&&a.dataTransfer.setDragImage(S("img"),0,0)}function ub(a,b){if("string"==typeof a&&(a=eb[a],!a))return!1;var c=Bd;try{bd.readOnly&&(Qd=!0),b&&(Bd=null),a(ee)}catch(d){if(d!=sb)throw d;return!1}finally{Bd=c,Qd=!1}return!0}function vb(a){function e(){k=!0}var f=b(bd.keyMap),g=f.auto;clearTimeout(de),g&&!d(a)&&(de=setTimeout(function(){b(bd.keyMap)==f&&(bd.keyMap=g.call?g.call(null,ee):g)},50));var h=zb[G(a,"keyCode")],i=!1,j=nb&&$;if(null==h||a.altGraphKey)return!1;G(a,"altKey")&&(h="Alt-"+h),G(a,j?"metaKey":"ctrlKey")&&(h="Ctrl-"+h),G(a,j?"ctrlKey":"metaKey")&&(h="Cmd-"+h);var k=!1;return i=G(a,"shiftKey")?c("Shift-"+h,bd.extraKeys,bd.keyMap,function(a){return ub(a,!0)},e)||c(h,bd.extraKeys,bd.keyMap,function(a){return"string"==typeof a&&/^go[A-Z]/.test(a)?ub(a):void 0},e):c(h,bd.extraKeys,bd.keyMap,ub,e),k&&(i=!1),i&&(B(a),Tc(),jb&&(a.oldKeyCode=a.keyCode,a.keyCode=0)),i}function wb(a,b){var d=c("'"+b+"'",bd.extraKeys,bd.keyMap,function(a){return ub(a,!0)});return d&&(B(a),Tc()),d}function Ab(a){if(wd||Db(),hb&&27==a.keyCode&&(a.returnValue=!1),Zd&&Ub()&&(Zd=!1),!bd.onKeyEvent||!bd.onKeyEvent(ee,A(a))){var b=G(a,"keyCode");fc(16==b||G(a,"shiftKey"));var c=vb(a);nb&&(fe=c?b:null,!c&&88==b&&G(a,$?"metaKey":"ctrlKey")&&Ob(""))}}function Bb(a){if(Zd&&Ub(),!bd.onKeyEvent||!bd.onKeyEvent(ee,A(a))){var b=G(a,"keyCode"),c=G(a,"charCode");if(nb&&b==fe)return fe=null,B(a),void 0;if(!(nb&&(!a.which||a.which<10)||pb)||!vb(a)){var d=String.fromCharCode(null==c?b:c);bd.electricChars&&vd.electricChars&&bd.smartIndent&&!bd.readOnly&&vd.electricChars.indexOf(d)>-1&&setTimeout(_c(function(){tc(Nd.to.line,"smart")}),75),wb(a,d)||Tb()}}}function Cb(a){bd.onKeyEvent&&bd.onKeyEvent(ee,A(a))||16==G(a,"keyCode")&&(Bd=null)}function Db(){"nocursor"!=bd.readOnly&&(wd||(bd.onFocus&&bd.onFocus(ee),wd=!0,-1==sd.className.search(/\bCodeMirror-focused\b/)&&(sd.className+=" CodeMirror-focused")),Sb(),Tc())}function Eb(){wd&&(bd.onBlur&&bd.onBlur(ee),wd=!1,Md&&_c(function(){Md&&(Md(),Md=null)})(),sd.className=sd.className.replace(" CodeMirror-focused","")),clearInterval(ud),setTimeout(function(){wd||(Bd=null)},150)}function Fb(a,b,c,d,e){if(!Qd){var f=[];if(zd.iter(a.line,b.line+1,function(a){f.push(o(a.text,a.markedSpans))}),_d)for(_d.addChange(a.line,c.length,f);_d.done.length>bd.undoDepth;)_d.done.shift();var g=l(n(f[0]),n(N(f)),a.ch,b.ch,c);Jb(a,b,g,d,e)}}function Gb(a,b){if(a.length){for(var c=a.pop(),d=[],e=c.length-1;e>=0;e-=1){var f=c[e],g=[],h=f.start+f.added;zd.iter(f.start,h,function(a){g.push(o(a.text,a.markedSpans))}),d.push({start:f.start,added:f.old.length,old:g});var i={line:f.start+f.old.length-1,ch:W(m(N(g)),m(N(f.old)))};Jb({line:f.start,ch:0},{line:h-1,ch:q(h-1).text.length},f.old,i,i)}Fd=!0,b.push(d)}}function Hb(){Gb(_d.done,_d.undone)}function Ib(){Gb(_d.undone,_d.done)}function Jb(a,b,c,d,e){function f(a){return a<=Math.min(b.line,b.line+u)?a:a+u}if(!Qd){var g=!1,h=Wd.text.length;bd.lineWrapping||zd.iter(a.line,b.line+1,function(a){return a.hidden||a.text.length!=h?void 0:(g=!0,!0)}),(a.line!=b.line||c.length>1)&&(Kd=!0);var i=b.line-a.line,j=q(a.line),k=q(b.line),l=N(c);if(0==a.ch&&0==b.ch&&""==m(l)){for(var o=[],p=0,s=c.length-1;s>p;++p)o.push(new r(m(c[p]),n(c[p])));k.update(k.text,n(l)),i&&zd.remove(a.line,i,Ld),o.length&&zd.insert(a.line,o)}else if(j==k)if(1==c.length)j.update(j.text.slice(0,a.ch)+m(c[0])+j.text.slice(b.ch),n(c[0]));else{for(var o=[],p=1,s=c.length-1;s>p;++p)o.push(new r(m(c[p]),n(c[p])));o.push(new r(m(l)+j.text.slice(b.ch),n(l))),j.update(j.text.slice(0,a.ch)+m(c[0]),n(c[0])),zd.insert(a.line+1,o)}else if(1==c.length)j.update(j.text.slice(0,a.ch)+m(c[0])+k.text.slice(b.ch),n(c[0])),zd.remove(a.line+1,i,Ld);else{var o=[];j.update(j.text.slice(0,a.ch)+m(c[0]),n(c[0])),k.update(m(l)+k.text.slice(b.ch),n(l));for(var p=1,s=c.length-1;s>p;++p)o.push(new r(m(c[p]),n(c[p])));i>1&&zd.remove(a.line+1,i-1,Ld),zd.insert(a.line+1,o)}if(bd.lineWrapping){var t=Math.max(5,sd.clientWidth/Oc()-3);zd.iter(a.line,a.line+c.length,function(a){if(!a.hidden){var b=Math.ceil(a.text.length/t)||1;b!=a.height&&z(a,b)}})}else zd.iter(a.line,a.line+c.length,function(a){var b=a.text;!a.hidden&&b.length>h&&(Wd=a,h=b.length,Yd=!0,g=!1)}),g&&(Xd=!0);Ad=Math.min(Ad,a.line),Yc(400);var u=c.length-i-1;if(Hd.push({from:a.line,to:b.line+1,diff:u}),bd.onChange){for(var p=0;p<c.length;++p)"string"!=typeof c[p]&&(c[p]=c[p].text);var v={from:a,to:b,text:c};if(Id){for(var w=Id;w.next;w=w.next);w.next=v}else Id=v}hc(lc(d),lc(e),f(Nd.from.line),f(Nd.to.line))}}function Kb(){var a=zd.height*Nc()+2*Pc();return.99*a>sd.offsetHeight?a:!1}function Lb(a){var b=Kb();hd.style.display=b?"block":"none",b?(gd.style.height=rd.style.minHeight=b+"px",hd.style.height=sd.clientHeight+"px",null!=a&&(hd.scrollTop=sd.scrollTop=a,lb&&setTimeout(function(){hd.scrollTop==a&&(hd.scrollTop=a+(a?-1:1),hd.scrollTop=a)},0))):rd.style.minHeight="",qd.style.top=Sd*Nc()+"px"}function Mb(){Wd=q(0),Yd=!0;var a=Wd.text.length;zd.iter(1,zd.size,function(b){var c=b.text;!b.hidden&&c.length>a&&(a=c.length,Wd=b)}),Xd=!1}function Nb(a,b,c){function d(d){if(Q(d,b))return d;if(!Q(c,d))return e;var f=d.line+a.length-(c.line-b.line)-1,g=d.ch;return d.line==c.line&&(g+=N(a).length-(c.ch-(c.line==b.line?b.ch:0))),{line:f,ch:g}}b=lc(b),c=c?lc(c):b,a=xb(a);var e;return Pb(a,b,c,function(a){return e=a,{from:d(Nd.from),to:d(Nd.to)}}),e}function Ob(a,b){Pb(xb(a),Nd.from,Nd.to,function(a){return"end"==b?{from:a,to:a}:"start"==b?{from:Nd.from,to:Nd.from}:{from:Nd.from,to:a}})}function Pb(a,b,c,d){var e=1==a.length?a[0].length+b.ch:N(a).length,f=d({line:b.line+a.length-1,ch:e});Fb(b,c,a,f.from,f.to)}function Qb(a,b,c){var d=a.line,e=b.line;if(d==e)return q(d).text.slice(a.ch,b.ch);var f=[q(d).text.slice(a.ch)];return zd.iter(d+1,e,function(a){f.push(a.text)}),f.push(q(e).text.slice(0,b.ch)),f.join(c||"\n")}function Rb(a){return Qb(Nd.from,Nd.to,a)}function Sb(){Zd||xd.set(bd.pollInterval,function(){Ub(),wd&&Sb()})}function Tb(){function a(){var c=Ub();c||b?(Zd=!1,Sb()):(b=!0,xd.set(60,a))}var b=!1;Zd=!0,xd.set(20,a)}function Ub(){if(!wd||yb(ed)||bd.readOnly)return!1;var a=ed.value;if(a==ge)return!1;oe||Zc(),Bd=null;for(var b=0,c=Math.min(ge.length,a.length);c>b&&ge[b]==a[b];)++b;return b<ge.length?Nd.from={line:Nd.from.line,ch:Nd.from.ch-(ge.length-b)}:Pd&&P(Nd.from,Nd.to)&&!Rd&&(Nd.to={line:Nd.to.line,ch:Math.min(q(Nd.to.line).text.length,Nd.to.ch+(a.length-b))}),Ob(a.slice(b),"end"),a.length>1e3?ed.value=ge="":ge=a,oe||$c(),Rd=!1,!0}function Vb(a){P(Nd.from,Nd.to)?a&&(ge=ed.value=""):(ge="",ed.value=Rb(),wd&&O(ed))}function Wb(){"nocursor"!=bd.readOnly&&ed.focus()}function Xb(){var a=Yb();if(Zb(a.x,a.y,a.x,a.yBot),wd){var b=rd.getBoundingClientRect(),c=null;if(a.y+b.top<0?c=!0:a.y+b.top+Nc()>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),null!=c){var d="none"==kd.style.display;d&&(kd.style.display="",kd.style.left=a.x+"px",kd.style.top=a.y-Sd+"px"),kd.scrollIntoView(c),d&&(kd.style.display="none")}}}function Yb(){var a=Kc(Nd.inverted?Nd.from:Nd.to),b=bd.lineWrapping?Math.min(a.x,nd.offsetWidth):a.x;return{x:b,y:a.y,yBot:a.yBot}}function Zb(a,b,c,d){var e=$b(a,b,c,d);null!=e.scrollLeft&&(sd.scrollLeft=e.scrollLeft),null!=e.scrollTop&&(hd.scrollTop=sd.scrollTop=e.scrollTop)}function $b(a,b,c,d){var e=Qc(),f=Pc();b+=f,d+=f,a+=e,c+=e;var g=sd.clientHeight,h=hd.scrollTop,i={},j=Kb()||1/0,k=f+10>b,l=d+f>j-10;h>b?i.scrollTop=k?0:Math.max(0,b):d>h+g&&(i.scrollTop=(l?j:d)-g);var m=sd.clientWidth,n=sd.scrollLeft,o=bd.fixedGutter?pd.clientWidth:0,p=o+e+10>a;return n+o>a||p?(p&&(a=0),i.scrollLeft=Math.max(0,a-10-o)):c>m+n-3&&(i.scrollLeft=c+10-m),i}function _b(a){var b=Nc(),c=(null!=a?a:hd.scrollTop)-Pc(),d=Math.max(0,Math.floor(c/b)),e=Math.ceil((c+sd.clientHeight)/b);return{from:w(zd,d),to:w(zd,e)}}function ac(a,b,c){function d(){var a=id.firstChild,b=!1;return zd.iter(Td,Ud,function(c){if(a){if(!c.hidden){var d=Math.round(a.offsetHeight/l)||1;c.height!=d&&(z(c,d),Kd=b=!0)}a=a.nextSibling}}),b}if(!sd.clientWidth)return Td=Ud=Sd=0,void 0;var e=_b(c);if(a!==!0&&0==a.length&&e.from>Td&&e.to<Ud)return Lb(c),void 0;var f=Math.max(e.from-100,0),g=Math.min(zd.size,e.to+100);f>Td&&20>f-Td&&(f=Td),Ud>g&&20>Ud-g&&(g=Math.min(zd.size,Ud));for(var h=a===!0?[]:bc([{from:Td,to:Ud,domStart:0}],a),i=0,j=0;j<h.length;++j){var k=h[j];k.from<f&&(k.domStart+=f-k.from,k.from=f),k.to>g&&(k.to=g),k.from>=k.to?h.splice(j--,1):i+=k.to-k.from}if(i==g-f&&f==Td&&g==Ud)return Lb(c),void 0;h.sort(function(a,b){return a.domStart-b.domStart});var l=Nc(),m=pd.style.display;id.style.display="none",cc(f,g,h),id.style.display=pd.style.display="";var n=f!=Td||g!=Ud||Vd!=sd.clientHeight+l;if(n&&(Vd=sd.clientHeight+l),(f!=Td||g!=Ud&&bd.onViewportChange)&&setTimeout(function(){bd.onViewportChange&&bd.onViewportChange(ee,f,g)}),Td=f,Ud=g,Sd=x(zd,f),Yc(100),id.childNodes.length!=Ud-Td)throw new Error("BAD PATCH! "+JSON.stringify(h)+" size="+(Ud-Td)+" nodes="+id.childNodes.length);return bd.lineWrapping&&d(),pd.style.display=m,(n||Kd)&&dc()&&bd.lineWrapping&&d()&&dc(),Lb(c),ec(),!b&&bd.onUpdate&&bd.onUpdate(ee),!0}function bc(a,b){for(var c=0,d=b.length||0;d>c;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;i>h;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g,domStart:j.domStart}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from,domStart:j.domStart}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g,domStart:j.domStart+(e.to-j.from)}))}a=f}return a}function cc(a,b,c){function d(a){var b=a.nextSibling;return a.parentNode.removeChild(a),b}if(c.length){for(var e=0,f=id.firstChild,g=0;g<c.length;++g){for(var h=c[g];h.domStart>e;)f=d(f),e++;for(var i=0,j=h.to-h.from;j>i;++i)f=f.nextSibling,e++}for(;f;)f=d(f)}else T(id);var k=c.shift(),f=id.firstChild,i=a;zd.iter(a,b,function(a){if(k&&k.to==i&&(k=c.shift()),!k||k.from>i){if(a.hidden)var b=S("pre");else{var b=C(a);if(a.className&&(b.className=a.className),a.bgClassName){var d=S("pre"," ",a.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");b=S("div",[d,b],null,"position: relative")}}id.insertBefore(b,f)}else f=f.nextSibling;++i})}function dc(){if(bd.gutter||bd.lineNumbers){var a=qd.offsetHeight,b=sd.clientHeight;pd.style.height=(2>a-b?b:a)+"px";var c,d=document.createDocumentFragment(),e=Td;if(zd.iter(Td,Math.max(Ud,Td+1),function(a){if(a.hidden)d.appendChild(S("pre"));else{var b=a.gutterMarker,f=bd.lineNumbers?bd.lineNumberFormatter(e+bd.firstLineNumber):null;b&&b.text?f=b.text.replace("%N%",null!=f?f:""):null==f&&(f=" ");var g=d.appendChild(S("pre",null,b&&b.style));g.innerHTML=f;for(var h=1;h<a.height;++h)g.appendChild(S("br")),g.appendChild(document.createTextNode(" "));b||(c=e)}++e}),pd.style.display="none",U(od,d),null!=c&&bd.lineNumbers){for(var f=od.childNodes[c-Td],g=String(zd.size).length,h=L(f.firstChild),i="";h.length+i.length<g;)i+=" ";i&&f.insertBefore(document.createTextNode(i),f.firstChild)}pd.style.display="";var j=Math.abs((parseInt(nd.style.marginLeft)||0)-pd.offsetWidth)>2;return nd.style.marginLeft=pd.offsetWidth+"px",Kd=!1,j}}function ec(){var a=P(Nd.from,Nd.to),b=Kc(Nd.from,!0),c=a?b:Kc(Nd.to,!0),d=Nd.inverted?b:c,e=Nc(),f=K(td),g=K(id);if(fd.style.top=Math.max(0,Math.min(sd.offsetHeight,d.y+g.top-f.top))+"px",fd.style.left=Math.max(0,Math.min(sd.offsetWidth,d.x+g.left-f.left))+"px",a)kd.style.top=d.y+"px",kd.style.left=(bd.lineWrapping?Math.min(d.x,nd.offsetWidth):d.x)+"px",kd.style.display="",jd.style.display="none";else{var h=b.y==c.y,i=document.createDocumentFragment(),j=nd.clientWidth||nd.offsetWidth,k=nd.clientHeight||nd.offsetHeight,l=function(a,b,c,d){var e=kb?"width: "+(c?j-c-a:j)+"px":"right: "+c+"px";i.appendChild(S("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; "+e+"; height: "+d+"px"))};if(Nd.from.ch&&b.y>=0){var m=h?j-c.x:0;l(b.x,b.y,m,e)}var n=Math.max(0,b.y+(Nd.from.ch?e:0)),o=Math.min(c.y,k)-n;o>.2*e&&l(0,n,0,o),h&&Nd.from.ch||!(c.y<k-.5*e)||l(0,c.y,j-c.x,e),U(jd,i),kd.style.display="none",jd.style.display=""}}function fc(a){Bd=a?Bd||(Nd.inverted?Nd.to:Nd.from):null}function gc(a,b){var c=Bd&&lc(Bd);c&&(Q(c,a)?a=c:Q(b,c)&&(b=c)),hc(a,b),Gd=!0}function hc(a,b,c,d){if($d=null,null==c&&(c=Nd.from.line,d=Nd.to.line),!P(Nd.from,a)||!P(Nd.to,b)){if(Q(b,a)){var e=b;b=a,a=e}if(a.line!=c){var f=ic(a,c,Nd.from.ch);f?a=f:Hc(a.line,!1)}if(b.line!=d&&(b=ic(b,d,Nd.to.ch)),P(a,b)?Nd.inverted=!1:P(a,Nd.to)?Nd.inverted=!1:P(b,Nd.from)&&(Nd.inverted=!0),bd.autoClearEmptyLines&&P(Nd.from,Nd.to)){var g=Nd.inverted?a:b;if(g.line!=Nd.from.line&&Nd.from.line<zd.size){var h=q(Nd.from.line);/^\s+$/.test(h.text)&&setTimeout(_c(function(){if(h.parent&&/^\s+$/.test(h.text)){var a=v(h);Nb("",{line:a,ch:0},{line:a,ch:h.text.length})}},10))}}Nd.from=a,Nd.to=b,Jd=!0}}function ic(a,b,c){function d(b){for(var d=a.line+b,e=1==b?zd.size:-1;d!=e;){var g=q(d);if(!g.hidden){var h=a.ch;return(f||h>c||h>g.text.length)&&(h=g.text.length),{line:d,ch:h}}d+=b}}var e=q(a.line),f=a.ch==e.text.length&&a.ch!=c;return e.hidden?a.line>=b?d(1)||d(-1):d(-1)||d(1):a}function jc(a,b,c){var d=lc({line:a,ch:b||0});(c?gc:hc)(d,d)}function kc(a){return Math.max(0,Math.min(a,zd.size-1))}function lc(a){if(a.line<0)return{line:0,ch:0};if(a.line>=zd.size)return{line:zd.size-1,ch:q(zd.size-1).text.length};var b=a.ch,c=q(a.line).text.length;return null==b||b>c?{line:a.line,ch:c}:0>b?{line:a.line,ch:0}:a}function mc(a,b){function c(){for(var b=f+a,c=0>a?-1:zd.size;b!=c;b+=a){var d=q(b);if(!d.hidden)return f=b,h=d,!0}}function d(b){if(g==(0>a?0:h.text.length)){if(b||!c())return!1;g=0>a?h.text.length:0}else g+=a;return!0}var e=Nd.inverted?Nd.from:Nd.to,f=e.line,g=e.ch,h=q(f);if("char"==b)d();else if("column"==b)d(!0);else if("word"==b)for(var i=!1;!(0>a)||d();){if(Y(h.text.charAt(g)))i=!0;else if(i){0>a&&(a=1,d());break}if(a>0&&!d())break}return{line:f,ch:g}}function nc(a,b){var c=0>a?Nd.from:Nd.to;(Bd||P(Nd.from,Nd.to))&&(c=mc(a,b)),jc(c.line,c.ch,!0)}function oc(a,b){P(Nd.from,Nd.to)?0>a?Nb("",mc(a,b),Nd.to):Nb("",Nd.from,mc(a,b)):Nb("",Nd.from,Nd.to),Gd=!0}function pc(a,b){var c=Kc(Nd.inverted?Nd.from:Nd.to,!0);if(null!=$d&&(c.x=$d),"page"==b)var d=Math.min(sd.clientHeight,window.innerHeight||document.documentElement.clientHeight),e=Lc(c.x,c.y+d*a);else if("line"==b)var f=Nc(),e=Lc(c.x,c.y+.5*f+a*f);"page"==b&&(hd.scrollTop+=Kc(e,!0).y-c.y),jc(e.line,e.ch,!0),$d=c.x}function qc(a){var b=q(a.line).text,c=a.ch,d=a.ch;if(b){a.after===!1||d==b.length?--c:++d;for(var e=b.charAt(c),f=Y(e)?Y:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&Y(a)};c>0&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return{from:{line:a.line,ch:c},to:{line:a.line,ch:d}}}function rc(a){gc({line:a,ch:0},lc({line:a+1,ch:0}))}function sc(a){if(P(Nd.from,Nd.to))return tc(Nd.from.line,a);for(var b=Nd.to.line-(Nd.to.ch?0:1),c=Nd.from.line;b>=c;++c)tc(c,a)}function tc(a,b){if(b||(b="add"),"smart"==b)if(vd.indent)var c=Wc(a);else b="prev";var d,e=q(a),f=e.indentation(bd.tabSize),g=e.text.match(/^\s*/)[0];"smart"==b&&(d=vd.indent(c,e.text.slice(g.length),e.text),d==sb&&(b="prev")),"prev"==b?d=a?q(a-1).indentation(bd.tabSize):0:"add"==b?d=f+bd.indentUnit:"subtract"==b&&(d=f-bd.indentUnit),d=Math.max(0,d);var h="",i=0;if(bd.indentWithTabs)for(var j=Math.floor(d/bd.tabSize);j;--j)i+=bd.tabSize,h+="	";d>i&&(h+=M(d-i)),h!=g&&Nb(h,{line:a,ch:0},{line:a,ch:g.length}),e.stateAfter=null}function uc(){vd=a.getMode(bd,bd.mode),zd.iter(0,zd.size,function(a){a.stateAfter=null}),Ad=0,Yc(100)}function vc(){var a=bd.gutter||bd.lineNumbers;pd.style.display=a?"":"none",a?Kd=!0:id.parentNode.style.marginLeft=0}function wc(){if(bd.lineWrapping){td.className+=" CodeMirror-wrap";var a=sd.clientWidth/Oc()-3;zd.iter(0,zd.size,function(b){if(!b.hidden){var c=Math.ceil(b.text.length/a)||1;1!=c&&z(b,c)}}),nd.style.minWidth=ld.style.left=""}else td.className=td.className.replace(" CodeMirror-wrap",""),Mb(),zd.iter(0,zd.size,function(a){1==a.height||a.hidden||z(a,1)});Hd.push({from:0,to:zd.size})}function xc(){sd.className=sd.className.replace(/\s*cm-s-\S+/g,"")+bd.theme.replace(/(^|\s)\s*/g," cm-s-")}function yc(){var a=fb[bd.keyMap].style;td.className=td.className.replace(/\s*cm-keymap-\S+/g,"")+(a?" cm-keymap-"+a:"")}function zc(a,b){this.lines=[],this.type=a,b&&(this.style=b)}function Ac(a,b,c,d){a=lc(a),b=lc(b);var e=new zc("range",c);if(d)for(var f in d)d.hasOwnProperty(f)&&(e[f]=d[f]);var g=a.line;return zd.iter(g,b.line+1,function(c){var d={from:g==a.line?a.ch:null,to:g==b.line?b.ch:null,marker:e};c.markedSpans=(c.markedSpans||[]).concat([d]),e.lines.push(c),++g}),Hd.push({from:a.line,to:b.line+1}),e}function Bc(a){a=lc(a);var b=new zc("bookmark"),c=q(a.line);_d.addChange(a.line,1,[o(c.text,c.markedSpans)],!0);var d={from:a.ch,to:a.ch,marker:b};return c.markedSpans=(c.markedSpans||[]).concat([d]),b.lines.push(c),b}function Cc(a){a=lc(a);var b=[],c=q(a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker)}return b}function Dc(a,b,c){return"number"==typeof a&&(a=q(kc(a))),a.gutterMarker={text:b,style:c},Kd=!0,a}function Ec(a){"number"==typeof a&&(a=q(kc(a))),a.gutterMarker=null,Kd=!0}function Fc(a,b){var c=a,d=a;return"number"==typeof a?d=q(kc(a)):c=v(a),null==c?null:b(d,c)?(Hd.push({from:c,to:c+1}),d):null}function Gc(a,b,c){return Fc(a,function(a){return a.className!=b||a.bgClassName!=c?(a.className=b,a.bgClassName=c,!0):void 0})}function Hc(a,b){return Fc(a,function(a,c){if(a.hidden!=b){a.hidden=b,bd.lineWrapping||(b&&a.text.length==Wd.text.length?Xd=!0:!b&&a.text.length>Wd.text.length&&(Wd=a,Xd=!1)),z(a,b?0:1);var d=Nd.from.line,e=Nd.to.line;if(b&&(d==c||e==c)){var f=d==c?ic({line:d,ch:0},d,0):Nd.from,g=e==c?ic({line:e,ch:0},e,0):Nd.to;if(!g)return;hc(f,g)}return Kd=!0}})}function Ic(a){if("number"==typeof a){if(!p(a))return null;var b=a;if(a=q(a),!a)return null}else{var b=v(a);if(null==b)return null}var c=a.gutterMarker;return{line:b,handle:a,text:a.text,markerText:c&&c.text,markerClass:c&&c.style,lineClass:a.className,bgClass:a.bgClassName}}function Jc(a,b){if(0==b)return{top:0,left:0};var c=C(a,b);U(md,c);var d=c.anchor,e=d.offsetTop,f=d.offsetLeft;if(hb&&0==e&&0==f){var g=S("span","x");d.parentNode.insertBefore(g,d.nextSibling),e=g.offsetTop}return{top:e,left:f}}function Kc(a,b){var c,d=Nc(),e=d*(x(zd,a.line)-(b?Sd:0));if(0==a.ch)c=0;else{var f=Jc(q(a.line),a.ch);c=f.left,bd.lineWrapping&&(e+=Math.max(0,f.top))}return{x:c,y:e,yBot:e+d}}function Lc(a,b){function c(a){var b=Jc(h,a);if(j){var c=Math.round(b.top/d);return m=c!=k,Math.max(0,b.left+(c-k)*sd.clientWidth)}return b.left}var d=Nc(),e=Oc(),f=Sd+Math.floor(b/d);if(0>f)return{line:0,ch:0};var g=w(zd,f);if(g>=zd.size)return{line:zd.size-1,ch:q(zd.size-1).text.length};var h=q(g),i=h.text,j=bd.lineWrapping,k=j?f-x(zd,g):0;if(0>=a&&0==k)return{line:g,ch:0};for(var l,m=!1,n=0,o=0,p=i.length,r=Math.min(p,Math.ceil((a+.9*k*sd.clientWidth)/e));;){var s=c(r);if(!(a>=s&&p>r)){l=s,p=r;break}r=Math.min(p,Math.ceil(1.2*r))}if(a>l)return{line:g,ch:p};for(r=Math.floor(.8*p),s=c(r),a>s&&(n=r,o=s);;){if(1>=p-n){var t=l-a>a-o;return{line:g,ch:t?n:p,after:t}}var u=Math.ceil((n+p)/2),v=c(u);v>a?(p=u,l=v,m&&(l+=1e3)):(n=u,o=v)}}function Mc(a){var b=Kc(a,!0),c=K(nd);return{x:c.left+b.x,y:c.top+b.y,yBot:c.top+b.yBot}}function Nc(){if(null==je){je=S("pre");for(var a=0;49>a;++a)je.appendChild(document.createTextNode("x")),je.appendChild(S("br"));je.appendChild(document.createTextNode("x"))}var b=id.clientHeight;return b==ie?he:(ie=b,U(md,je.cloneNode(!0)),he=md.firstChild.offsetHeight/50||1,T(md),he)}function Oc(){if(sd.clientWidth==me)return ke;me=sd.clientWidth;var a=S("span","x"),b=S("pre",[a]);return U(md,b),ke=a.offsetWidth||10}function Pc(){return nd.offsetTop}function Qc(){return nd.offsetLeft}function Rc(a,b){var c,d,e=K(sd,!0);try{c=a.clientX,d=a.clientY}catch(a){return null}if(!b&&(c-e.left>sd.clientWidth||d-e.top>sd.clientHeight))return null;var f=K(nd,!0);return Lc(c-f.left,d-f.top)}function Sc(a){function b(){if(fd.style.position="relative",ed.style.cssText=e,jb&&(hd.scrollTop=d),Sb(),null!=ed.selectionStart){clearTimeout(le);var a=ed.value=" "+(P(Nd.from,Nd.to)?"":ed.value),b=0;ge=" ",ed.selectionStart=1,ed.selectionEnd=a.length,le=setTimeout(function c(){" "==ge&&0==ed.selectionStart?_c(eb.selectAll)(ee):b++<10?le=setTimeout(c,500):Vb()},200)}}var c=Rc(a),d=hd.scrollTop;if(c&&!nb){(P(Nd.from,Nd.to)||Q(c,Nd.from)||!Q(c,Nd.to))&&_c(jc)(c.line,c.ch);var e=ed.style.cssText;if(fd.style.position="absolute",ed.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: white; "+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",Wb(),Vb(!0),P(Nd.from,Nd.to)&&(ed.value=ge=" "),gb){D(a);var f=H(window,"mouseup",function(){f(),setTimeout(b,20)},!0)}else setTimeout(b,50)}}function Tc(){clearInterval(ud);var a=!0;kd.style.visibility="",ud=setInterval(function(){kd.style.visibility=(a=!a)?"":"hidden"},bd.cursorBlinkRate)}function Uc(a){function b(a,b,c){if(a.text)for(var d,e=a.styles,f=g?0:a.text.length-1,i=g?0:e.length-2,j=g?e.length:-2;i!=j;i+=2*h){var k=e[i];if(e[i+1]==m){for(var l=g?0:k.length-1,p=g?k.length:-1;l!=p;l+=h,f+=h)if(f>=b&&c>f&&o.test(d=k.charAt(l))){var q=ne[d];if(">"==q.charAt(1)==g)n.push(d);else{if(n.pop()!=q.charAt(0))return{pos:f,match:!1};if(!n.length)return{pos:f,match:!0}}}}else f+=h*k.length}}var c=Nd.inverted?Nd.from:Nd.to,d=q(c.line),e=c.ch-1,f=e>=0&&ne[d.text.charAt(e)]||ne[d.text.charAt(++e)];if(f){for(var g=(f.charAt(0),">"==f.charAt(1)),h=g?1:-1,i=d.styles,j=e+1,k=0,l=i.length;l>k;k+=2)if((j-=i[k].length)<=0){var m=i[k+1];break}for(var n=[d.text.charAt(e)],o=/[(){}[\]]/,k=c.line,l=g?Math.min(k+100,zd.size):Math.max(-1,k-100);k!=l;k+=h){var d=q(k),p=k==c.line,r=b(d,p&&g?e+1:0,p&&!g?e:d.text.length);if(r)break}r||(r={pos:null,match:!1});var m=r.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",s=Ac({line:c.line,ch:e},{line:c.line,ch:e+1},m),t=null!=r.pos&&Ac({line:k,ch:r.pos},{line:k,ch:r.pos+1},m),u=_c(function(){s.clear(),t&&t.clear()});a?setTimeout(u,800):Md=u}}function Vc(a){for(var b,c,d=a,e=a-40;d>e;--d){if(0==d)return 0;var f=q(d-1);if(f.stateAfter)return d;var g=f.indentation(bd.tabSize);(null==c||b>g)&&(c=d-1,b=g)}return c}function Wc(a){var b=Vc(a),c=b&&q(b-1).stateAfter;return c=c?e(vd,c):f(vd),zd.iter(b,a,function(d){d.process(vd,c,bd.tabSize),d.stateAfter=b==a-1||0==b%5?e(vd,c):null}),c}function Xc(){if(!(Ad>=Ud)){var a=+new Date+bd.workTime,b=e(vd,Wc(Ad)),c=Ad;zd.iter(Ad,Ud,function(c){return Ad>=Td?(c.highlight(vd,b,bd.tabSize),c.stateAfter=e(vd,b)):(c.process(vd,b,bd.tabSize),c.stateAfter=0==Ad%5?e(vd,b):null),++Ad,+new Date>a?(Yc(bd.workDelay),!0):void 0}),Ud>c&&Ad>=Td&&_c(function(){Hd.push({from:c,to:Ad})})()}}function Yc(a){Ud>Ad&&yd.set(a,Xc)}function Zc(){Fd=Gd=Id=null,Hd=[],Jd=!1,Ld=[]}function $c(){if(Xd&&Mb(),Yd&&!bd.lineWrapping){var a=ld.offsetWidth,b=Jc(Wd,Wd.text.length).left;ib||(ld.style.left=b+"px",nd.style.minWidth=b+a+"px"),Yd=!1}var c,d;if(Jd){var e=Yb();c=$b(e.x,e.y,e.x,e.yBot)}(Hd.length||c&&null!=c.scrollTop)&&(d=ac(Hd,!0,c&&c.scrollTop)),d||(Jd&&ec(),Kd&&dc()),c&&Xb(),Jd&&Tc(),wd&&(Fd===!0||Fd!==!1&&Jd)&&Vb(Gd),Jd&&bd.matchBrackets&&setTimeout(_c(function(){Md&&(Md(),Md=null),P(Nd.from,Nd.to)&&Uc(!1)}),20);var f=Jd,g=Ld;Id&&bd.onChange&&ee&&bd.onChange(ee,Id),f&&bd.onCursorActivity&&bd.onCursorActivity(ee);for(var h=0;h<g.length;++h)g[h](ee);d&&bd.onUpdate&&bd.onUpdate(ee)}function _c(a){return function(){oe++||Zc();try{var b=a.apply(this,arguments)}finally{--oe||$c()}return b}}function ad(a){_d.startCompound();try{return a()}finally{_d.endCompound()}}var bd={},cd=a.defaults;for(var dd in cd)cd.hasOwnProperty(dd)&&(bd[dd]=(j&&j.hasOwnProperty(dd)?j:cd)[dd]);var ed=S("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");ed.setAttribute("wrap","off"),ed.setAttribute("autocorrect","off"),ed.setAttribute("autocapitalize","off");var fd=S("div",[ed],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),gd=S("div",null,"CodeMirror-scrollbar-inner"),hd=S("div",[gd],"CodeMirror-scrollbar"),id=S("div"),jd=S("div",null,null,"position: relative; z-index: -1"),kd=S("pre"," ","CodeMirror-cursor"),ld=S("pre"," ","CodeMirror-cursor","visibility: hidden"),md=S("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),nd=S("div",[md,kd,ld,jd,id],null,"position: relative; z-index: 0"),od=S("div",null,"CodeMirror-gutter-text"),pd=S("div",[od],"CodeMirror-gutter"),qd=S("div",[pd,S("div",[nd],"CodeMirror-lines")],null,"position: relative"),rd=S("div",[qd],null,"position: relative"),sd=S("div",[rd],"CodeMirror-scroll");sd.setAttribute("tabIndex","-1");var td=S("div",[fd,hd,sd],"CodeMirror"+(bd.lineWrapping?" CodeMirror-wrap":""));g.appendChild?g.appendChild(td):g(td),xc(),yc(),Z&&(ed.style.width="0px"),lb||(sd.draggable=!0),nd.style.outline="none",null!=bd.tabindex&&(ed.tabIndex=bd.tabindex),bd.autofocus&&Wb(),bd.gutter||bd.lineNumbers||(pd.style.display="none"),pb&&(fd.style.height="1px",fd.style.position="absolute"),qb?(hd.style.zIndex=-2,hd.style.visibility="hidden"):ib&&(hd.style.minWidth="18px");var ud,vd,wd,xd=new I,yd=new I,zd=new t([new s([new r("")])]),Ad=0;uc();var Bd,Cd,Dd,Ed,Fd,Gd,Hd,Id,Jd,Kd,Ld,Md,Nd={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Od=0,Pd=!1,Qd=!1,Rd=!1,Sd=0,Td=0,Ud=0,Vd=0,Wd=q(0),Xd=!1,Yd=!0,Zd=!1,$d=null;_c(function(){J(bd.value||""),Fd=!1})();var _d=new y;H(sd,"mousedown",_c(db)),H(sd,"dblclick",_c(mb)),H(nd,"selectstart",B),gb||H(sd,"contextmenu",Sc),H(sd,"scroll",ab),H(hd,"scroll",_),H(hd,"mousedown",function(){wd&&setTimeout(Wb,0)});var ae=H(window,"resize",function(){td.parentNode?ac(!0):ae()},!0);H(ed,"keyup",_c(Cb)),H(ed,"input",Tb),H(ed,"keydown",_c(Ab)),H(ed,"keypress",_c(Bb)),H(ed,"focus",Db),H(ed,"blur",Eb),bd.dragDrop&&(H(sd,"dragstart",rb),H(sd,"dragenter",k),H(sd,"dragover",k),H(sd,"drop",_c(ob))),H(sd,"paste",function(){Wb(),Tb()}),H(ed,"paste",function(){Rd=!0,Tb()}),H(ed,"cut",_c(function(){bd.readOnly||Ob("")})),pb&&H(rd,"mouseup",function(){document.activeElement==ed&&ed.blur(),Wb()});var be;try{be=document.activeElement==ed}catch(ce){}be||bd.autofocus?setTimeout(Db,20):Eb();var de,ee=td.CodeMirror={getValue:V,setValue:_c(J),getSelection:Rb,replaceSelection:_c(Ob),focus:function(){window.focus(),Wb(),Db(),Tb()},setOption:function(a,b){var c=bd[a];bd[a]=b,"mode"==a||"indentUnit"==a?uc():"readOnly"==a&&"nocursor"==b?(Eb(),ed.blur()):"readOnly"!=a||b?"theme"==a?xc():"lineWrapping"==a&&c!=b?_c(wc)():"tabSize"==a?ac(!0):"keyMap"==a?yc():"tabindex"==a&&(ed.tabIndex=b):Vb(!0),("lineNumbers"==a||"gutter"==a||"firstLineNumber"==a||"theme"==a||"lineNumberFormatter"==a)&&(vc(),ac(!0))},getOption:function(a){return bd[a]},getMode:function(){return vd},undo:_c(Hb),redo:_c(Ib),indentLine:_c(function(a,b){"string"!=typeof b&&(b=null==b?bd.smartIndent?"smart":"prev":b?"add":"subtract"),p(a)&&tc(a,b)}),indentSelection:_c(sc),historySize:function(){return{undo:_d.done.length,redo:_d.undone.length}},clearHistory:function(){_d=new y},setHistory:function(a){_d=new y,_d.done=a.done,_d.undone=a.undone},getHistory:function(){function a(a){for(var b,c=0,d=[];c<a.length;++c){d.push(b=[]);for(var e=0,f=a[c];e<f.length;++e){var g=[],h=f[e];b.push({start:h.start,added:h.added,old:g});for(var i=0;i<h.old.length;++i)g.push(m(h.old[i]))}}return d}return{done:a(_d.done),undone:a(_d.undone)}},matchBrackets:_c(function(){Uc(!0)}),getTokenAt:_c(function(a){return a=lc(a),q(a.line).getTokenAt(vd,Wc(a.line),bd.tabSize,a.ch)}),getStateAfter:function(a){return a=kc(null==a?zd.size-1:a),Wc(a+1)},cursorCoords:function(a,b){return null==a&&(a=Nd.inverted),this.charCoords(a?Nd.from:Nd.to,b)},charCoords:function(a,b){return a=lc(a),"local"==b?Kc(a,!1):"div"==b?Kc(a,!0):Mc(a)},coordsChar:function(a){var b=K(nd);return Lc(a.x-b.left,a.y-b.top)},defaultTextHeight:function(){return Nc()},markText:_c(Ac),setBookmark:Bc,findMarksAt:Cc,setMarker:_c(Dc),clearMarker:_c(Ec),setLineClass:_c(Gc),hideLine:_c(function(a){return Hc(a,!0)}),showLine:_c(function(a){return Hc(a,!1)}),onDeleteLine:function(a,b){if("number"==typeof a){if(!p(a))return null;a=q(a)}return(a.handlers||(a.handlers=[])).push(b),a},lineInfo:Ic,getViewport:function(){return{from:Td,to:Ud}},addWidget:function(a,b,c,d,e){a=Kc(lc(a));var f=a.yBot,g=a.x;if(b.style.position="absolute",rd.appendChild(b),"over"==d)f=a.y;else if("near"==d){var h=Math.max(sd.offsetHeight,zd.height*Nc()),i=Math.max(rd.clientWidth,nd.clientWidth)-Qc();a.yBot+b.offsetHeight>h&&a.y>b.offsetHeight&&(f=a.y-b.offsetHeight),g+b.offsetWidth>i&&(g=i-b.offsetWidth)}b.style.top=f+Pc()+"px",b.style.left=b.style.right="","right"==e?(g=rd.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?g=0:"middle"==e&&(g=(rd.clientWidth-b.offsetWidth)/2),b.style.left=g+Qc()+"px"),c&&Zb(g,f,g+b.offsetWidth,f+b.offsetHeight)
},lineCount:function(){return zd.size},clipPos:lc,getCursor:function(a){return null==a&&(a=Nd.inverted),R(a?Nd.from:Nd.to)},somethingSelected:function(){return!P(Nd.from,Nd.to)},setCursor:_c(function(a,b,c){null==b&&"number"==typeof a.line?jc(a.line,a.ch,c):jc(a,b,c)}),setSelection:_c(function(a,b,c){(c?gc:hc)(lc(a),lc(b||a))}),getLine:function(a){return p(a)?q(a).text:void 0},getLineHandle:function(a){return p(a)?q(a):void 0},setLine:_c(function(a,b){p(a)&&Nb(b,{line:a,ch:0},{line:a,ch:q(a).text.length})}),removeLine:_c(function(a){p(a)&&Nb("",{line:a,ch:0},lc({line:a+1,ch:0}))}),replaceRange:_c(Nb),getRange:function(a,b,c){return Qb(lc(a),lc(b),c)},triggerOnKeyDown:_c(Ab),execCommand:function(a){return eb[a](ee)},moveH:_c(nc),deleteH:_c(oc),moveV:_c(pc),toggleOverwrite:function(){Pd?(Pd=!1,kd.className=kd.className.replace(" CodeMirror-overwrite","")):(Pd=!0,kd.className+=" CodeMirror-overwrite")},posFromIndex:function(a){var b,c=0;return zd.iter(0,zd.size,function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,++c,void 0)}),lc({line:c,ch:b})},indexFromPos:function(a){if(a.line<0||a.ch<0)return 0;var b=a.ch;return zd.iter(0,a.line,function(a){b+=a.text.length+1}),b},scrollTo:function(a,b){null!=a&&(sd.scrollLeft=a),null!=b&&(hd.scrollTop=sd.scrollTop=b),ac([])},getScrollInfo:function(){return{x:sd.scrollLeft,y:hd.scrollTop,height:hd.scrollHeight,width:sd.scrollWidth}},scrollIntoView:function(a){var b=Kc(a?lc(a):Nd.inverted?Nd.from:Nd.to);Zb(b.x,b.y,b.x,b.yBot)},setSize:function(a,b){function c(a){return a=String(a),/^\d+$/.test(a)?a+"px":a}null!=a&&(td.style.width=c(a)),null!=b&&(sd.style.height=c(b)),ee.refresh()},operation:function(a){return _c(a)()},compoundChange:function(a){return ad(a)},refresh:function(){ac(!0,null,Od),hd.scrollHeight>Od&&(hd.scrollTop=Od)},getInputField:function(){return ed},getWrapperElement:function(){return td},getScrollerElement:function(){return sd},getGutterElement:function(){return pd}},fe=null,ge="";zc.prototype.clear=_c(function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=h(d.markedSpans,this);null!=e.from&&(a=v(d)),null!=e.to&&(b=v(d)),d.markedSpans=i(d.markedSpans,e)}null!=a&&Hd.push({from:a,to:b+1}),this.lines.length=0,this.explicitlyCleared=!0}),zc.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=h(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=v(d);null!=e.from&&(a={line:f,ch:e.from}),null!=e.to&&(b={line:f,ch:e.to})}}return"bookmark"==this.type?a:a&&{from:a,to:b}};var he,ie,je,ke,le,me=0,ne={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},oe=0;for(var pe in bb)bb.propertyIsEnumerable(pe)&&!ee.propertyIsEnumerable(pe)&&(ee[pe]=bb[pe]);for(var qe=0;qe<cb.length;++qe)cb[qe](ee);return ee}function b(a){return"string"==typeof a?fb[a]:a}function c(a,c,d,e,f){function g(c){c=b(c);var d=c[a];if(d===!1)return f&&f(),!0;if(null!=d&&e(d))return!0;if(c.nofallthrough)return f&&f(),!0;var h=c.fallthrough;if(null==h)return!1;if("[object Array]"!=Object.prototype.toString.call(h))return g(h);for(var i=0,j=h.length;j>i;++i)if(g(h[i]))return!0;return!1}return c&&g(c)?!0:g(d)}function d(a){var b=zb[G(a,"keyCode")];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function e(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function f(a,b,c){return a.startState?a.startState(b,c):!0}function g(a,b){this.pos=this.start=0,this.string=a,this.tabSize=b||8}function h(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function i(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function j(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||"bookmark"==g.type&&f.from==b&&f.from!=c){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function k(a,b){if(a)for(var c,d=0;d<a.length;++d){var e=a[d],f=e.marker,g=null==e.to||(f.inclusiveRight?e.to>=b:e.to>b);if(g||"bookmark"==f.type&&e.from==b){var h=null==e.from||(f.inclusiveLeft?e.from<=b:e.from<b);(c||(c=[])).push({from:h?null:e.from-b,to:null==e.to?null:e.to-b,marker:f})}}return c}function l(a,b,c,d,e){if(!a&&!b)return e;var f=j(a,c),g=k(b,d),i=1==e.length,l=N(e).length+(i?c:0);if(f)for(var m=0;m<f.length;++m){var n=f[m];if(null==n.to){var p=h(g,n.marker);p?i&&(n.to=null==p.to?null:p.to+l):n.to=c}}if(g)for(var m=0;m<g.length;++m){var n=g[m];if(null!=n.to&&(n.to+=l),null==n.from){var p=h(f,n.marker);p||(n.from=l,i&&(f||(f=[])).push(n))}else n.from+=l,i&&(f||(f=[])).push(n)}var q=[o(e[0],f)];if(!i){var r,s=e.length-2;if(s>0&&f)for(var m=0;m<f.length;++m)null==f[m].to&&(r||(r=[])).push({from:null,to:null,marker:f[m].marker});for(var m=0;s>m;++m)q.push(o(e[m+1],r));q.push(o(N(e),g))}return q}function m(a){return"string"==typeof a?a:a.text}function n(a){if("string"==typeof a)return null;for(var b=a.markedSpans,c=null,d=0;d<b.length;++d)b[d].marker.explicitlyCleared?c||(c=b.slice(0,d)):c&&c.push(b[d]);return c?c.length?c:null:b}function o(a,b){return b?{text:a,markedSpans:b}:a}function p(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c){var d=b[c].marker.lines,e=X(d,a);d.splice(e,1)}a.markedSpans=null}}function q(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.lines.push(a);a.markedSpans=b}}function r(a,b){this.text=a,this.height=1,q(this,b)}function s(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;c>b;++b)a[b].parent=this,d+=a[b].height;this.height=d}function t(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;e>d;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function u(a,b){for(;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(e>b){a=d;break}b-=e}return a.lines[b]}function v(a){if(null==a.parent)return null;for(var b=a.parent,c=X(b.lines,a),d=b.parent;d;b=d,d=d.parent){var e=0;for(d.children.length;d.children[e]!=b;++e)c+=d.children[e].chunkSize()}return c}function w(a,b){var c=0;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.height;if(g>b){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;e>d;++d){var h=a.lines[d],i=h.height;if(i>b)break;b-=i}return c+d}function x(a,b){var c=0;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.chunkSize();if(g>b){a=f;continue a}b-=g,c+=f.height}return c}while(!a.lines);for(var d=0;b>d;++d)c+=a.lines[d].height;return c}function y(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function z(){D(this)}function A(a){return a.stop||(a.stop=z),a}function B(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function C(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function D(a){B(a),C(a)}function E(a){return a.target||a.srcElement}function F(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),$&&a.ctrlKey&&1==b&&(b=3),b}function G(a,b){var c=a.override&&a.override.hasOwnProperty(b);return c?a.override[b]:a[b]}function H(a,b,c,d){if("function"==typeof a.addEventListener){if(a.addEventListener(b,c,!1),d)return function(){a.removeEventListener(b,c,!1)}}else{var e=function(a){c(a||window.event)};if(a.attachEvent("on"+b,e),d)return function(){a.detachEvent("on"+b,e)}}}function I(){this.id=null}function J(a,b,c){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var d=0,e=0;b>d;++d)"	"==a.charAt(d)?e+=c-e%c:++e;return e}function K(a,b){try{var c=a.getBoundingClientRect();c={top:c.top,left:c.left}}catch(d){c={top:0,left:0}}if(!b)if(null==window.pageYOffset){var e=document.documentElement||document.body.parentNode;null==e.scrollTop&&(e=document.body),c.top+=e.scrollTop,c.left+=e.scrollLeft}else c.top+=window.pageYOffset,c.left+=window.pageXOffset;return c}function L(a){return a.textContent||a.innerText||a.nodeValue||""}function M(a){for(;vb.length<=a;)vb.push(N(vb)+" ");return vb[a]}function N(a){return a[a.length-1]}function O(a){Z?(a.selectionStart=0,a.selectionEnd=a.value.length):a.select()}function P(a,b){return a.line==b.line&&a.ch==b.ch}function Q(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function R(a){return{line:a.line,ch:a.ch}}function S(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)V(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function T(a){return a.innerHTML="",a}function U(a,b){T(a).appendChild(b)}function V(a,b){jb?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function W(a,b){if(!b)return 0;if(!a)return b.length;for(var c=a.length,d=b.length;c>=0&&d>=0&&a.charAt(c)==b.charAt(d);--c,--d);return d+1}function X(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}function Y(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||wb.test(a))}a.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(a){return a}};var Z=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),$=Z||/Mac/.test(navigator.platform);/Win/.test(navigator.platform);var _=a.modes={},ab=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}_[b]=c},a.defineMIME=function(a,b){ab[a]=b},a.resolveMode=function(b){if("string"==typeof b&&ab.hasOwnProperty(b))b=ab[b];else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=_[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(db.hasOwnProperty(c.name)){var f=db[c.name];for(var g in f)f.hasOwnProperty(g)&&(e[g]=f[g])}return e.name=c.name,e},a.listModes=function(){var a=[];for(var b in _)_.propertyIsEnumerable(b)&&a.push(b);return a},a.listMIMEs=function(){var a=[];for(var b in ab)ab.propertyIsEnumerable(b)&&a.push({mime:b,mode:ab[b]});return a};var bb=a.extensions={};a.defineExtension=function(a,b){bb[a]=b};var cb=[];a.defineInitHook=function(a){cb.push(a)};var db=a.modeExtensions={};a.extendMode=function(a,b){var c=db.hasOwnProperty(a)?db[a]:db[a]={};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d])};var eb=a.commands={selectAll:function(a){a.setSelection({line:0,ch:0},{line:a.lineCount()-1})},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!P(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:{line:b.line}):a.replaceRange("",b,{line:b.line+1,ch:0})},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",{line:b,ch:0},{line:b})},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.setCursor(0,0,!0)},goDocEnd:function(a){a.setSelection({line:a.lineCount()-1},null,!0)},goLineStart:function(a){a.setCursor(a.getCursor().line,0,!0)},goLineStartSmart:function(a){var b=a.getCursor(),c=a.getLine(b.line),d=Math.max(0,c.search(/\S/));a.setCursor(b.line,b.ch<=d&&b.ch?0:d,!0)},goLineEnd:function(a){a.setSelection({line:a.getCursor().line},null,!0)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goWordRight:function(a){a.moveH(1,"word")},delCharLeft:function(a){a.deleteH(-1,"char")},delCharRight:function(a){a.deleteH(1,"char")},delWordLeft:function(a){a.deleteH(-1,"word")},delWordRight:function(a){a.deleteH(1,"word")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("	","end")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),{line:b.line,ch:b.ch-1},{line:b.line,ch:b.ch+1})},newlineAndIndent:function(a){a.replaceSelection("\n","end"),a.indentLine(a.getCursor().line)},toggleOverwrite:function(a){a.toggleOverwrite()}},fb=a.keyMap={};fb.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},fb.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},fb.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},fb["default"]=$?fb.macDefault:fb.pcDefault,fb.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.isModifierKey=d,a.fromTextArea=function(b,c){function d(){b.value=i.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form){var g=H(b.form,"submit",d,!0),h=b.form.submit;b.form.submit=function j(){d(),b.form.submit=h,b.form.submit(),b.form.submit=j}}b.style.display="none";var i=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return i.save=d,i.getTextArea=function(){return b},i.toTextArea=function(){d(),b.parentNode.removeChild(i.getWrapperElement()),b.style.display="",b.form&&(g(),"function"==typeof b.form.submit&&(b.form.submit=h))},i};var gb=/gecko\/\d{7}/i.test(navigator.userAgent),hb=/MSIE \d/.test(navigator.userAgent),ib=/MSIE [1-7]\b/.test(navigator.userAgent),jb=/MSIE [1-8]\b/.test(navigator.userAgent),kb=hb&&5==document.documentMode,lb=/WebKit\//.test(navigator.userAgent),mb=/Chrome\//.test(navigator.userAgent),nb=/Opera\//.test(navigator.userAgent),ob=/Apple Computer/.test(navigator.vendor),pb=/KHTML\//.test(navigator.userAgent),qb=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);a.copyState=e,a.startState=f,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);b=c.state,a=c.mode}return c||{mode:a,state:b}},g.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return J(this.string,this.start,this.tabSize)},indentation:function(){return J(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a};return e(this.string).indexOf(e(a),this.pos)==this.pos?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=g;var rb=" ";gb||hb&&!ib?rb="​":nb&&(rb=""),r.prototype={update:function(a,b){this.text=a,this.stateAfter=this.styles=null,p(this),q(this,b)},highlight:function(a,b,c){var d=new g(this.text,c),e=this.styles||(this.styles=[]),f=e.length=0;for(""==this.text&&a.blankLine&&a.blankLine(b);!d.eol();){var h=a.token(d,b),i=d.current();if(d.start=d.pos,f&&e[f-1]==h?e[f-2]+=i:i&&(e[f++]=i,e[f++]=h),d.pos>5e3){e[f++]=this.text.slice(d.pos),e[f++]=null;break}}},process:function(a,b,c){var d=new g(this.text,c);for(""==this.text&&a.blankLine&&a.blankLine(b);!d.eol()&&d.pos<=5e3;)a.token(d,b),d.start=d.pos},getTokenAt:function(a,b,c,d){for(var e=this.text,f=new g(e,c);f.pos<d&&!f.eol();){f.start=f.pos;var h=a.token(f,b)}return{start:f.start,end:f.pos,string:f.current(),className:h||null,state:b}},indentation:function(a){return J(this.text,null,a)},getContent:function(a,b,c){function d(b,c,d){if(c){if(f&&hb&&" "==c.charAt(0)&&(c=" "+c.slice(1)),f=!1,h.test(c))for(var e=document.createDocumentFragment(),i=0;;){h.lastIndex=i;var j=h.exec(c),k=j?j.index-i:c.length-i;if(k&&(e.appendChild(document.createTextNode(c.slice(i,i+k))),g+=k),!j)break;if(i+=k+1,"	"==j[0]){var l=a-g%a;e.appendChild(S("span",M(l),"cm-tab")),g+=l}else{var m=S("span","•","cm-invalidchar");m.title="\\u"+j[0].charCodeAt(0).toString(16),e.appendChild(m),g+=1}}else{g+=c.length;var e=document.createTextNode(c)}d?b.appendChild(S("span",[e],d)):b.appendChild(e)}}function e(a){return a?"cm-"+a.replace(/ +/g," cm-"):null}var f=!0,g=0,h=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,i=S("pre"),j=d;if(null!=b){var k=0,l=i.anchor=S("span");j=function(a,e,f){var g=e.length;if(b>=k&&k+g>b){var h=b-k;if(h&&(d(a,e.slice(0,h),f),c)){var i=e.slice(h-1,h+1);ub.test(i)?a.appendChild(S("wbr")):!ib&&/\w\w/.test(i)&&a.appendChild(document.createTextNode("‍"))}a.appendChild(l),d(l,nb?e.slice(h,h+1):e.slice(h),f),nb&&d(a,e.slice(h+1),f),b--,k+=g}else k+=g,d(a,e,f),k==b&&k==p?(V(l,rb),a.appendChild(l)):k>b+10&&/\s/.test(e)&&(j=function(){})}}var m=this.styles,n=this.text,o=this.markedSpans,p=n.length;if(n||null!=b)if(o&&o.length){o.sort(function(a,b){return a.from-b.from});for(var q,r=0,s=0,t="",u=o[0].from||0,v=[],w=0,x=function(){for(var a;w<o.length&&((a=o[w]).from==r||null==a.from);)"range"==a.marker.type&&v.push(a),++w;u=w<o.length?o[w].from:1/0;for(var b=0;b<v.length;++b){var c=v[b].to;null==c&&(c=1/0),c==r?v.splice(b--,1):u=Math.min(c,u)}};p>r;){u==r&&x();for(var y=Math.min(p,u);;){if(t){for(var z=r+t.length,A=q,B=0;B<v.length;++B){var C=v[B];A=(A?A+" ":"")+C.marker.style,C.marker.endStyle&&C.to===Math.min(z,y)&&(A+=" "+C.marker.endStyle),C.marker.startStyle&&C.from===r&&(A+=" "+C.marker.startStyle)}if(j(i,z>y?t.slice(0,y-r):t,A),z>=y){t=t.slice(y-r),r=y;break}r=z}t=m[s++],q=e(m[s++])}}}else for(var s=0,D=0;p>D;s+=2){var E=m[s],q=m[s+1],F=E.length;D+F>p&&(E=E.slice(0,p-D)),D+=F,j(i,E,e(q))}else j(i," ");return i},cleanUp:function(){this.parent=null,p(this)}},s.prototype={chunkSize:function(){return this.lines.length},remove:function(a,b,c){for(var d=a,e=a+b;e>d;++d){var f=this.lines[d];if(this.height-=f.height,f.cleanUp(),f.handlers)for(var g=0;g<f.handlers.length;++g)c.push(f.handlers[g])}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertHeight:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;e>d;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},t.prototype={chunkSize:function(){return this.size},remove:function(a,b,c){this.size-=b;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(f>a){var g=Math.min(b,f-a),h=e.height;if(e.remove(a,g,c),this.height-=h-e.height,f==g&&(this.children.splice(d--,1),e.parent=null),0==(b-=g))break;a=0}else a-=f}if(this.size-b<25){var i=[];this.collapse(i),this.children=[new s(i)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;c>b;++b)this.children[b].collapse(a)},insert:function(a,b){for(var c=0,d=0,e=b.length;e>d;++d)c+=b[d].height;this.insertHeight(a,b,c)},insertHeight:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>=a){if(f.insertHeight(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new s(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new t(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=X(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new t(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iter:function(a,b,c){this.iterN(a,b-a,c)},iterN:function(a,b,c){for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}},y.prototype={addChange:function(a,b,c){this.undone.length=0;var d=+new Date,e=N(this.done),f=e&&N(e),g=d-this.time;if(e&&!this.closed&&this.compound)e.push({start:a,added:b,old:c});else if(g>400||!f||this.closed||f.start>a+c.length||f.start+f.added<a)this.done.push([{start:a,added:b,old:c}]),this.closed=!1;else{for(var h=Math.max(0,f.start-a),i=Math.max(0,a+c.length-(f.start+f.added)),j=h;j>0;--j)f.old.unshift(c[j-1]);for(var j=i;j>0;--j)f.old.push(c[c.length-j]);h&&(f.start=a),f.added+=b-(c.length-h-i)}this.time=d},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},a.e_stop=D,a.e_preventDefault=B,a.e_stopPropagation=C,a.connect=H,I.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}};var sb=a.Pass={toString:function(){return"CodeMirror.Pass"}},tb=function(){if(jb)return!1;var a=S("div");return"draggable"in a||"dragDrop"in a}();!function(){var a=S("textarea");return a.value="foo\nbar",a.value.indexOf("\r")>-1?"\r\n":"\n"}();var ub=/^$/;gb?ub=/$'/:ob?ub=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:mb&&(ub=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var vb=[""],wb=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,xb=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=xb;var yb=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var zb={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return a.keyNames=zb,function(){for(var a=0;10>a;a++)zb[a+48]=String(a);for(var a=65;90>=a;a++)zb[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)zb[a+111]=zb[a+63235]="F"+a}(),a.version="2.36",a}();
CodeMirror.defineMode("markdown",function(a,b){function c(a,b,c){return b.f=b.inline=c,c(a,b)}function d(a,b,c){return b.f=b.block=c,c(a,b)}function e(a){return a.linkTitle=!1,a.em=!1,a.strong=!1,a.quote=!1,q||a.f!=g||(a.f=k,a.block=f),null}function f(a,e){if(e.list!==!1&&e.indentationDiff>=0?(e.indentationDiff<4&&(e.indentation-=e.indentationDiff),e.list=null):e.list=!1,e.indentationDiff>=4)return e.indentation-=4,a.skipToEnd(),y;if(a.eatSpace())return null;if("#"===a.peek()||v&&a.match(N))e.header=!0;else if(a.eat(">"))e.indentation++,e.quote=!0;else{if("["===a.peek())return c(a,e,m);if(a.match(K,!0))return B;if(a.match(L,!0)||a.match(M,!0))e.indentation+=4,e.list=!0;else if(b.fencedCodeBlocks&&a.match(/^```([\w+#]*)/,!0))return e.localMode=t(RegExp.$1),e.localMode&&(e.localState=e.localMode.startState()),d(a,e,h),y}return c(a,e,e.inline)}function g(a,b){var c=r.token(a,b.htmlState);return q&&"tag"===c&&"openTag"!==b.htmlState.type&&!b.htmlState.context&&(b.f=k,b.block=f),b.md_inside&&-1!=a.current().indexOf(">")&&(b.f=k,b.block=f,b.htmlState.context=void 0),c}function h(a,b){return a.sol()&&a.match(/^```/,!0)?(b.localMode=b.localState=null,b.f=k,b.block=f,y):b.localMode?b.localMode.token(a,b.localState):(a.skipToEnd(),y)}function i(a){var b=[];return a.strong?b.push(a.em?J:I):a.em&&b.push(H),a.linkText&&b.push(F),a.code&&b.push(y),a.header&&b.push(x),a.quote&&b.push(z),a.list!==!1&&b.push(A),b.length?b.join(" "):null}function j(a,b){return a.match(O,!0)?i(b):void 0}function k(a,e){var f=e.text(a,e);if("undefined"!=typeof f)return f;if(e.list)return e.list=null,A;var h=a.next();if("\\"===h)return a.next(),i(e);if(e.linkTitle){e.linkTitle=!1;var j=h;"("===h&&(j=")"),j=(j+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var k="^\\s*(?:[^"+j+"\\\\]+|\\\\\\\\|\\\\.)"+j;if(a.match(new RegExp(k),!0))return G}if("`"===h){var m=i(e),n=a.pos;a.eatWhile("`");var o=1+a.pos-n;return e.code?o===u?(e.code=!1,m):i(e):(u=o,e.code=!0,i(e))}if(e.code)return i(e);if("!"===h&&a.match(/\[.*\] ?(?:\(|\[)/,!1))return a.match(/\[.*\]/),e.inline=e.f=l,C;if("["===h&&a.match(/.*\](\(| ?\[)/,!1))return e.linkText=!0,i(e);if("]"===h&&e.linkText){var q=i(e);return e.linkText=!1,e.inline=e.f=l,q}if("<"===h&&a.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!0))return c(a,e,p(D,">"));if("<"===h&&a.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!0))return c(a,e,p(E,">"));if("<"===h&&a.match(/^\w/,!1)){if(-1!=a.string.indexOf(">")){var r=a.string.substring(1,a.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(r)&&(e.md_inside=!0)}return a.backUp(1),d(a,e,g)}if("<"===h&&a.match(/^\/\w*?>/))return e.md_inside=!1,"tag";var s=!1;if(!b.underscoresBreakWords&&"_"===h&&"_"!==a.peek()&&a.match(/(\w)/,!1)){var t=a.pos-2;if(t>=0){var v=a.string.charAt(t);"_"!==v&&v.match(/(\w)/,!1)&&(s=!0)}}var m=i(e);if("*"===h||"_"===h&&!s){if(e.strong===h&&a.eat(h))return e.strong=!1,m;if(!e.strong&&a.eat(h))return e.strong=h,i(e);if(e.em===h)return e.em=!1,m;if(!e.em)return e.em=h,i(e)}else if(" "===h&&(a.eat("*")||a.eat("_"))){if(" "===a.peek())return i(e);a.backUp(1)}return i(e)}function l(a,b){if(a.eatSpace())return null;var d=a.next();return"("===d||"["===d?c(a,b,p(G,"("===d?")":"]")):"error"}function m(a,b){return a.match(/^[^\]]*\]:/,!0)?(b.f=n,F):c(a,b,k)}function n(a,b){return a.eatSpace()?null:(a.match(/^[^\s]+/,!0),void 0===a.peek()?b.linkTitle=!0:a.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),b.f=b.inline=k,G)}function o(a){return P[a]||(a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),P[a]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+a+")")),P[a]}function p(a,b,c){return c=c||k,function(d,e){return d.match(o(b)),e.inline=e.f=c,a}}var q=CodeMirror.mimeModes.hasOwnProperty("text/html"),r=CodeMirror.getMode(a,q?"text/html":"text/plain"),s={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp"},t=function(){var b,c,d={},e={},f=CodeMirror.listModes();for(b=0;b<f.length;b++)d[f[b]]=f[b];var g=CodeMirror.listMIMEs();for(b=0;b<g.length;b++)c=g[b].mime,e[c]=g[b].mime;for(var h in s)(s[h]in d||s[h]in e)&&(d[h]=s[h]);return function(b){return d[b]?CodeMirror.getMode(a,d[b]):null}}();void 0===b.underscoresBreakWords&&(b.underscoresBreakWords=!0),void 0===b.fencedCodeBlocks&&(b.fencedCodeBlocks=!1);var u=0,v=!1,w=!1,x="header",y="comment",z="quote",A="string",B="hr",C="tag",D="link",E="link",F="link",G="string",H="em",I="strong",J="emstrong",K=/^([*\-=_])(?:\s*\1){2,}\s*$/,L=/^[*\-+]\s+/,M=/^[0-9]+\.\s+/,N=/^(?:\={1,}|-{1,})$/,O=/^[^!\[\]*_\\<>` "'(]+/,P=[];return{startState:function(){return v=!1,w=!1,{f:f,block:f,htmlState:CodeMirror.startState(r),indentation:0,inline:k,text:j,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:!1,list:!1,quote:!1}},copyState:function(a){return{f:a.f,block:a.block,htmlState:CodeMirror.copyState(r,a.htmlState),indentation:a.indentation,localMode:a.localMode,localState:a.localMode?CodeMirror.copyState(a.localMode,a.localState):null,inline:a.inline,text:a.text,linkTitle:a.linkTitle,em:a.em,strong:a.strong,header:a.header,list:a.list,quote:a.quote,md_inside:a.md_inside}},token:function(a,b){if(a.sol()){if(a.match(/^\s*$/,!0))return v=!1,e(b);w&&(v=!0,w=!1),w=!0,b.header=!1,b.code=!1,b.f=b.block;var c=a.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,d=4*Math.floor((c-b.indentation)/4);if(d>4&&(d=4),c=b.indentation+d,b.indentationDiff=c-b.indentation,b.indentation=c,c>0)return null}return b.f(a,b)},blankLine:e,getType:i}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown");
window.VarnamIME=function(){"use strict";function a(a){function b(){var a='<div id="'+q+'" class="CodeMirror-completions" style="display: none;"><select multiple="false"></select></div>';$("body").append(a)}function c(){$("body").on("dblclick",t,function(){d(f()),v=!0}),$(s).keydown(function(a){if(a.keyCode===x.ESCAPE)m(),z.focus();else if(h(a.keyCode)){var b=$(this).find(":selected").text();if(void 0!==b&&""!==b&&(d(b),a.keyCode==x.ENTER))return a.preventDefault(),a.stopPropagation(),v=!0,!0}})}function d(a){var b=o(z),c=b.start;z.charCoords(c);var d=b.word;""!==d&&(z.replaceRange(a,c,b.end),z.focus()),m(),e(a)}function e(a){void 0!==B&&"en"!==B&&$.post("api/learn",{text:a,lang:B})}function f(){return $(s).find(":selected").text()}function g(){var a=f();void 0!==a&&""!==a&&d(a)}function h(a){var b=-1==$.inArray(a,y)?!1:!0;return b?!0:!1}function i(a,b){var c=$.event.fix(b);if("keydown"==c.type){if(v=!1,c.keyCode==x.ESCAPE)return m(),E=!0,void 0;if(u){if(c.keyCode===x.DOWN_ARROW)return $(s).focus(),c.preventDefault(),c.stopPropagation(),!0;if(h(c.keyCode)&&(g(),c.keyCode===x.ENTER))return c.preventDefault(),c.stopPropagation(),v=!0,!0}else if(c.keyCode==x.SPACE){if(v=!0,!E){var d=o(z);D[d.word]=d}E=!1}else h(c.keyCode)&&(v=!0)}}function j(){var a=o(z),b=z.charCoords(a.start);""!==a.word?k(b.x,b.y,a.word):m()}function k(a,b,c){if("en"!==B){var d=!1;m(),$.ajax({url:"api/tl/"+B+"/"+c,dataType:"jsonp",crossDomain:"true",success:function(c){if(null!==C&&C(!1),void 0!==D[c.input]){var d=D[c.input],e=z.getRange(d.start,d.end);e==c.input&&z.replaceRange(c.result[0],d.start,d.end),delete D[c.input]}else if(o(z).word==c.input){var f="",g=0;$.each(c.result,function(a,b){f+=0===a?"<option selected>"+b+"</option>":"<option>"+b+"</option>",g<b.length&&(g=b.length)}),f+='<option data-english="true">'+c.input+"</option>",$(s).html(f).css("height",c.result.length+5+"em").css("width",g+2+"em"),l(a,b),u=!0}},error:function(){d=!0,window.setTimeout(function(){d&&null!==C&&C(!0)},2e3)}})}}function l(a,b){var c=$(".CodeMirror"),d=$(r).css("display","block").css("left",a+"px").css("top",b+25+"px"),e=d.height(),f=d.width();b+e>c.position().top+c.innerHeight()&&d.css("top",b-e+"px"),a+f>c.position().left+c.innerWidth()&&d.css("left",a-f+"px")}function m(){$(r).css("display","none"),u=!1}function n(a){return null===a||""===a||" "==a||"\n"==a||"."==a||"	"==a||"\r"==a||'"'==a||"'"==a||"?"==a||"!"==a||","==a||"("==a||")"==a||""==a||"\f"==a||""==a||"\u2028"==a||"\u2029"==a||"\r"==a||"\n"==a||";"==a?!0:!1}function o(a){var b=a.getCursor(),c=0,d=0,e=a.getValue().length+1,f="",g=b.ch;for(c=b;g&&(f=a.getRange({line:b.line,ch:g-1},{line:b.line,ch:g}),!n(f));)--g,c={line:b.line,ch:g};for(d=b,g=b.ch;e>g&&(f=a.getRange({line:b.line,ch:g},{line:b.line,ch:g+1}),!n(f));)++g,d={line:b.line,ch:g};return{start:c,end:d,word:a.getRange(c,d)}}function p(a,b,c,d,e){window.clearTimeout(w),v||(w=window.setTimeout(function(){j()},10),null!==A&&A(a,b,c,d,e))}var q="popup",r="#"+q,s=r+" select",t=r+s+" option",u=!1,v=!1,w=null,x={ESCAPE:27,ENTER:13,TAB:9,SPACE:32,PERIOD:190,DOWN_ARROW:40,QUESTION:191,EXCLAMATION:49,COMMA:188,LEFT_BRACKET:57,RIGHT_BRACKET:48,SEMICOLON:59},y=[x.ENTER,x.TAB,x.SPACE,x.PERIOD,x.QUESTION,x.EXCLAMATION,x.COMMA,x.LEFT_BRACKET,x.RIGHT_BRACKET,x.SEMICOLON],z=null,A=null,B="en",C=null;z=CodeMirror.fromTextArea(a.textArea,{mode:a.mode,lineWrapping:!0,onChange:p,theme:"ambiance",extraKeys:{"Ctrl-Space":function(){j()}},onKeyEvent:i}),window.myCodeMirror=z,A=a.textChangedCallback||null,C=a.errorCallback||null,b(),c();var D={},E=!1,F={setLanguage:function(a){B=a},getValue:function(){return z.getValue()},dispose:function(){}};return F.setLanguage(a.language),F}return a}();